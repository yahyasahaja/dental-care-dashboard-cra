(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{103:function(e,t,n){},210:function(e,t,n){e.exports=n(326)},215:function(e,t,n){},28:function(e,t,n){"use strict";var r,a,i,o,c,s,u,l,p,h,b,f,d,g,O,y,v,w,m=n(8),j=n(11),k=n(5),E=(n(41),n(3)),A=(r=function e(){Object(j.a)(this,e),Object(m.a)(this,"isActive",a,this),Object(m.a)(this,"toggleisActive",i,this),Object(m.a)(this,"show",o,this),Object(m.a)(this,"hide",c,this)},a=Object(k.a)(r.prototype,"isActive",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(k.a)(r.prototype,"toggleisActive",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isActive=!e.isActive}}}),o=Object(k.a)(r.prototype,"show",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isActive=!0}}}),c=Object(k.a)(r.prototype,"hide",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isActive=!1}}}),r),T=window.overlay=new A,L=n(108),U=new(s=function e(){Object(j.a)(this,e),Object(m.a)(this,"data",u,this),Object(m.a)(this,"show",l,this),Object(m.a)(this,"hide",p,this)},u=Object(k.a)(s.prototype,"data",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{active:!1,action:"Dismiss",label:"Snackbar action cancel",type:"cancel",timeout:3e3}}}),l=Object(k.a)(s.prototype,"show",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,r,a){var i=e.data;e.data=Object(E.l)({active:!0,action:n||i.action,label:t||i.label,type:r||i.type,timeout:a||i.timeout})}}}),p=Object(k.a)(s.prototype,"hide",[E.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.data;e.data=Object(E.l)(Object(L.a)({},t,{active:!1}))}}}),s),R=n(12),S=n.n(R),x=n(27),z=n(26),_=n(23),I=n.n(_),P=n(29),C=(h=function(){function e(){Object(j.a)(this,e),Object(m.a)(this,"data",b,this),Object(m.a)(this,"isLoading",f,this),Object(m.a)(this,"isFetchingUsers",d,this),Object(m.a)(this,"isLoadingLogin",g,this)}return Object(z.a)(e,[{key:"login",value:function(){var e=Object(x.a)(S.a.mark(function e(t,n){var r,a,i,o;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isLoadingLogin=!0,e.next=4,I.a.post("/api/login",{email:t,password:n});case 4:return r=e.sent,a=r.data,i=a.access_token,o=a.refresh_token,D.setAccessToken(i),D.setRefreshToken(o),e.next=12,this.getUser();case 12:return this.isLoadingLogin=!1,e.abrupt("return",i);case 16:e.prev=16,e.t0=e.catch(0),this.isLoadingLogin=!1,console.log("ERROR WHILE LOGIN",e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(x.a)(S.a.mark(function e(){var t,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isLoading=!0,e.next=4,I.a.get("/api/user/");case 4:return t=e.sent,n=t.data,this.data=n,this.isLoading=!1,console.log(n),e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),this.isLoading=!1,U.show("Error fetching user"),console.log("ERROR WHILE FETCHING USERS",e.t0);case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"getUsers",value:function(){var e=Object(x.a)(S.a.mark(function e(){var t,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isFetchingUsers=!0,e.next=4,I.a.get("/api/users");case 4:return t=e.sent,n=t.data.data,this.isFetchingUsers=!1,console.log(n),e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(0),this.isFetchingUsers=!1,U.show("Error fetching user"),console.log("ERROR WHILE FETCHING USERS",e.t0);case 16:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"isLoggedIn",get:function(){return!!this.data}}]),e}(),b=Object(k.a)(h.prototype,"data",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Object(k.a)(h.prototype,"isLoading",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(k.a)(h.prototype,"isFetchingUsers",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(k.a)(h.prototype,"isLoadingLogin",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(k.a)(h.prototype,"isLoggedIn",[E.e],Object.getOwnPropertyDescriptor(h.prototype,"isLoggedIn"),h.prototype),Object(k.a)(h.prototype,"login",[E.d],Object.getOwnPropertyDescriptor(h.prototype,"login"),h.prototype),Object(k.a)(h.prototype,"getUser",[E.d],Object.getOwnPropertyDescriptor(h.prototype,"getUser"),h.prototype),Object(k.a)(h.prototype,"getUsers",[E.d],Object.getOwnPropertyDescriptor(h.prototype,"getUsers"),h.prototype),h),N=window.user=new C,W=(O=function(){function e(){Object(j.a)(this,e),Object(m.a)(this,"rawAccessToken",y,this),Object(m.a)(this,"refreshToken",v,this),Object(m.a)(this,"isSettingUp",w,this)}return Object(z.a)(e,[{key:"setup",value:function(){var e=Object(x.a)(S.a.mark(function e(){var t,n,r,a,i,o,c;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSettingUp=!0,t=localStorage.getItem(P.a)){e.next=4;break}return e.abrupt("return",this.isSettingUp=!1);case 4:return this.setAccessToken(t),e.next=7,N.getUser();case 7:if(!(n=e.sent)){e.next=11;break}return this.isSettingUp=!1,e.abrupt("return",n);case 11:return r=localStorage.getItem(P.c),e.prev=12,e.next=15,I.a.post("/api/login/refresh",{refresh_token:r});case 15:return a=e.sent,i=a.data,o=i.access_token,c=i.refresh_token,this.setAccessToken(o),this.setRefreshToken(c),e.next=23,N.getUser();case 23:return n=e.sent,this.isSettingUp=!1,e.abrupt("return",n);case 28:e.prev=28,e.t0=e.catch(12),this.isSettingUp=!1,console.log("ERROR WHILE SETTING UP",e.t0);case 32:case"end":return e.stop()}},e,this,[[12,28]])}));return function(){return e.apply(this,arguments)}}()},{key:"setAccessToken",value:function(e){this.rawAccessToken=e,I.a.defaults.headers.Authorization=this.bearerAccessToken,localStorage.setItem(P.a,e)}},{key:"setRefreshToken",value:function(e){this.refreshToken=e,localStorage.setItem(P.c,e)}},{key:"bearerAccessToken",get:function(){return"Bearer ".concat(this.rawAccessToken)}}]),e}(),y=Object(k.a)(O.prototype,"rawAccessToken",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(k.a)(O.prototype,"refreshToken",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(k.a)(O.prototype,"isSettingUp",[E.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(k.a)(O.prototype,"bearerAccessToken",[E.e],Object.getOwnPropertyDescriptor(O.prototype,"bearerAccessToken"),O.prototype),Object(k.a)(O.prototype,"setup",[E.d],Object.getOwnPropertyDescriptor(O.prototype,"setup"),O.prototype),Object(k.a)(O.prototype,"setAccessToken",[E.d],Object.getOwnPropertyDescriptor(O.prototype,"setAccessToken"),O.prototype),Object(k.a)(O.prototype,"setRefreshToken",[E.d],Object.getOwnPropertyDescriptor(O.prototype,"setRefreshToken"),O.prototype),O),D=window.token=new W;n.d(t,"b",function(){return U}),n.d(t,"c",function(){return D}),n.d(t,"d",function(){return N}),n.d(t,"a",function(){return T})},29:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return i});var r="https://dentalcare.dhimas.tech",a="access_token_dentalcare",i="refresh_token_dentalcare"},326:function(e,t,n){"use strict";n.r(t);var r,a=n(11),i=n(26),o=n(32),c=n(30),s=n(31),u=n(0),l=n.n(u),p=n(14),h=n.n(p),b=(n(215),n(12)),f=n.n(b),d=n(27),g=n(431),O=n(434),y=n(433),v=n(432),w=n(103),m=n.n(w),j=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:m.a.container},"Loading ...")}}]),t}(u.Component),k=n(43),E=n.n(k),A=n(40),T=n.n(A),L=n(23),U=n.n(L),R=n(29),S=n(105),x=n(42),z=n.n(x),_=n(106),I=n.n(_),P=n(28),C=n(71),N=l.a.lazy(function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,429))}),W=l.a.lazy(function(){return Promise.all([n.e(0),n.e(5),n.e(3)]).then(n.bind(null,430))});U.a.defaults.baseURL=R.b,U.a.defaults.headers.Accept="application/json",U.a.defaults.headers["Content-Type"]="application/json";var D=Object(C.a)(r=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(d.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.c.setup();case 2:P.b.show("abc");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderOverlayLoading",value:function(){if(P.a.isActive)return l.a.createElement("section",null,l.a.createElement("div",{className:T.a.loading},l.a.createElement("div",{className:T.a.loading2},l.a.createElement(E.a,{style:{color:"#fff"}}))))}},{key:"render",value:function(){return l.a.createElement("div",{className:T.a.container},l.a.createElement("div",{className:T.a.shadow}),l.a.createElement(u.Suspense,{fallback:l.a.createElement(j,null)},l.a.createElement(g.a,null,l.a.createElement(O.a,null,l.a.createElement(y.a,{path:"/auth/login",render:function(e){return l.a.createElement(N,e)}}),l.a.createElement(y.a,{path:"/dashboard/*",render:function(e){return l.a.createElement(W,e)}}),l.a.createElement(v.a,{from:"/dashboard",to:"/dashboard/home"}),l.a.createElement(v.a,{from:"/",to:"/auth/login"})))),l.a.createElement("section",null,l.a.createElement(S.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:P.b.data.active,autoHideDuration:P.b.data.timeout,message:P.b.data.label,onClose:function(){return P.b.hide()},"data-cy":"snackbar",action:[l.a.createElement(z.a,{key:"close","aria-label":"Close",color:"inherit",onClick:this.closeSnackbar},l.a.createElement(I.a,{"data-cy":"snackbar-close-btn"}))]})),this.renderOverlayLoading())}}]),t}(u.Component))||r,F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var G=n(22),B=n(69),M=n.n(B),J=n(107),V=n.n(J),$=Object(G.createMuiTheme)({palette:{primary:V.a,secondary:M.a},typography:{useNextVariants:!0}}),q=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(G.MuiThemeProvider,{theme:$},l.a.createElement(D,null))}}]),t}(u.Component);h.a.render(l.a.createElement(q,null),document.getElementById("app")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");F?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):H(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):H(t,e)})}}()},40:function(e,t,n){e.exports={container:"App_container__1T8d6",shadow:"App_shadow__2hWrF",loading:"App_loading__2BSGx"}}},[[210,6,4]]]);
//# sourceMappingURL=main.9edda131.chunk.js.map